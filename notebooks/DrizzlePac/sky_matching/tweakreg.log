[INFO    ] Setting up logfile :  tweakreg.log
[INFO    ] TweakReg Version 1.4.7(18-April-2018) started at: 01:19:38.560 (18/12/2019) 
[INFO    ] 
[INFO    ] Version Information
[INFO    ] --------------------
[INFO    ] Python Version [Clang 4.0.1 (tags/RELEASE_401/final)]
[INFO    ] 3.7.5 (default, Oct 25 2019, 10:52:18) 
[INFO    ] numpy Version -> 1.17.4 
[INFO    ] astropy Version -> 3.2.3 
[INFO    ] stwcs Version -> 1.5.3 
[INFO    ] 
[INFO    ] USER INPUT PARAMETERS common to all Processing Steps:
[INFO    ] 	clean :	False
[INFO    ] 	enforce_user_order :	True
[INFO    ] 	exclusions :	
[INFO    ] 	expand_refcat :	True
[INFO    ] 	input :	@drz.list
[INFO    ] 	interactive :	False
[INFO    ] 	refimage :	
[INFO    ] 	runfile :	tweakreg.log
[INFO    ] 	updatewcs :	False
[INFO    ] 	verbose :	False
[INFO    ] 	writecat :	True
[INFO    ] ibxl54030_drz.fits
[INFO    ] 
[INFO    ] 
[INFO    ] Finding shifts for: 
[INFO    ]     ibxl54030_drz.fits
[INFO    ]     ibxl51030_drz.fits
[INFO    ]     ibxl53030_drz.fits
[INFO    ]     ibxl55030_drz.fits
[INFO    ]     ibxl57030_drz.fits
[INFO    ]     ibxl50030_drz.fits
[INFO    ]     ibxl52030_drz.fits
[INFO    ]     ibxl56030_drz.fits
[INFO    ]     ibxl58030_drz.fits
[INFO    ] 
[INFO    ] USER INPUT PARAMETERS for finding sources for each input image:
[INFO    ] 	clean :	False
[INFO    ] 	computesig :	True
[INFO    ] 	conv_width :	4.5
[INFO    ] 	dqbits :	
[INFO    ] 	enforce_user_order :	True
[INFO    ] 	expand_refcat :	True
[INFO    ] 	fluxmax :	None
[INFO    ] 	fluxmin :	None
[INFO    ] 	input :	@drz.list
[INFO    ] 	interactive :	False
[INFO    ] 	nsigma :	1.5
[INFO    ] 	peakmax :	None
[INFO    ] 	peakmin :	1
[INFO    ] 	ratio :	1.0
[INFO    ] 	refimage :	
[INFO    ] 	roundhi :	1.0
[INFO    ] 	roundlo :	-1.0
[INFO    ] 	runfile :	tweakreg.log
[INFO    ] 	sharphi :	1.0
[INFO    ] 	sharplo :	0.2
[INFO    ] 	skysigma :	0.0
[INFO    ] 	theta :	0.0
[INFO    ] 	threshold :	10
[INFO    ] 	updatehdr :	True
[INFO    ] 	updatewcs :	False
[INFO    ] 	use_sharp_round :	False
[INFO    ] 	verbose :	False
[INFO    ] 	writecat :	True
[INFO    ] 	xyunits :	pixels
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl54030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl54030_drz.fits', EXT=('SCI', 1) started at: 01:19:38.907 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.543311
[WARNING ] /Users/etollerud/miniconda3/envs/nb-build/lib/python3.7/site-packages/drizzlepac/findobj.py:187: RuntimeWarning: invalid value encountered in greater
  tdata=np.where(convdata > threshold, convdata, 0)

[INFO    ] ###Source finding finished at: 01:19:39.0 (18/12/2019)
[INFO    ]      Found 38 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl54030_drz.fits': 38
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl51030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl51030_drz.fits', EXT=('SCI', 1) started at: 01:19:39.138 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.553781
[INFO    ] ###Source finding finished at: 01:19:39.260 (18/12/2019)
[INFO    ]      Found 52 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl51030_drz.fits': 52
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl53030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl53030_drz.fits', EXT=('SCI', 1) started at: 01:19:39.350 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.527635
[INFO    ] ###Source finding finished at: 01:19:39.481 (18/12/2019)
[INFO    ]      Found 36 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl53030_drz.fits': 36
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl55030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl55030_drz.fits', EXT=('SCI', 1) started at: 01:19:39.568 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.259246
[INFO    ] ###Source finding finished at: 01:19:39.689 (18/12/2019)
[INFO    ]      Found 55 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl55030_drz.fits': 55
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl57030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl57030_drz.fits', EXT=('SCI', 1) started at: 01:19:39.77 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.505249
[INFO    ] ###Source finding finished at: 01:19:39.900 (18/12/2019)
[INFO    ]      Found 65 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl57030_drz.fits': 65
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl50030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl50030_drz.fits', EXT=('SCI', 1) started at: 01:19:39.999 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.553639
[INFO    ] ###Source finding finished at: 01:19:40.12 (18/12/2019)
[INFO    ]      Found 57 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl50030_drz.fits': 57
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl52030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl52030_drz.fits', EXT=('SCI', 1) started at: 01:19:40.278 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.240202
[INFO    ] ###Source finding finished at: 01:19:40.395 (18/12/2019)
[INFO    ]      Found 59 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl52030_drz.fits': 59
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl56030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl56030_drz.fits', EXT=('SCI', 1) started at: 01:19:40.493 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.619044
[INFO    ] ###Source finding finished at: 01:19:40.612 (18/12/2019)
[INFO    ]      Found 47 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl56030_drz.fits': 47
[INFO    ] 
[INFO    ] ===  Source finding for image 'ibxl58030_drz.fits':
[INFO    ]   #  Source finding for 'ibxl58030_drz.fits', EXT=('SCI', 1) started at: 01:19:40.705 (18/12/2019)
[INFO    ]    Finding sources using sky sigma = 1.247739
[INFO    ] ###Source finding finished at: 01:19:40.824 (18/12/2019)
[INFO    ]      Found 65 objects.
[INFO    ] ===  FINAL number of objects in image 'ibxl58030_drz.fits': 65
[INFO    ] 
[INFO    ] Converting RA/Dec positions of reference sources from "ibxl54030_drz.fits" to X,Y positions in reference WCS...
[INFO    ] 
[INFO    ] ===============================================================
[INFO    ] Performing alignment in the projection plane defined by the WCS
[INFO    ] derived from 'ibxl54030_drz.fits'
[INFO    ] ===============================================================
[INFO    ] 
[INFO    ] USER INPUT PARAMETERS for matching sources:
[INFO    ] 	minobj :	5
[INFO    ] 	residplot :	both
[INFO    ] 	searchrad :	3.0
[INFO    ] 	searchunits :	arcseconds
[INFO    ] 	see2dplot :	True
[INFO    ] 	separation :	0.5
[INFO    ] 	tolerance :	1.0
[INFO    ] 	use2dhist :	True
[INFO    ] 	xoffset :	0.0
[INFO    ] 	yoffset :	0.0
[INFO    ] 
[INFO    ] USER INPUT PARAMETERS for fitting source lists:
[INFO    ] 	fitgeometry :	rscale
[INFO    ] 	labelsize :	8
[INFO    ] 	minobj :	5
[INFO    ] 	nclip :	3
[INFO    ] 	residplot :	both
[INFO    ] 	sigma :	3.0
[INFO    ] 	ylimit :	0.5
[INFO    ] 
[INFO    ] USER INPUT PARAMETERS for creating a shiftfile:
[INFO    ] 	outshifts :	shift4_drc.txt
[INFO    ] 	outwcs :	shifts_wcs.fits
[INFO    ] 	shiftfile :	True
[INFO    ] 
[INFO    ] ====================
[INFO    ] Performing fit for: ibxl51030_drz.fits
[INFO    ] 
[INFO    ] Matching sources from 'ibxl51030_drz.fits' with sources from reference image 'ibxl54030_drz.fits'
[INFO    ] Computing initial guess for X and Y shifts...
[INFO    ] Found initial X and Y shifts of -0.3918, -0.3918 with significance of 4 and 4 matches
[WARNING ] ##############################################################################
[WARNING ] #                                                                            #
[WARNING ] # WARNING:                                                                   #
[WARNING ] # Not enough matches (< 5) found for input image: ibxl51030_drz.fits         #
[WARNING ] #                                                                            #
[WARNING ] ##############################################################################
[INFO    ] ##############################################################################
[INFO    ] #                                                                            #
[INFO    ] # WARNING:                                                                   #
[INFO    ] # Not enough matches (< 5) found for input image: ibxl51030_drz.fits         #
[INFO    ] #                                                                            #
[INFO    ] ##############################################################################
[INFO    ] 
[INFO    ] ====================
[INFO    ] Performing fit for: ibxl53030_drz.fits
[INFO    ] 
[INFO    ] Matching sources from 'ibxl53030_drz.fits' with sources from reference image 'ibxl54030_drz.fits'
[INFO    ] Computing initial guess for X and Y shifts...
[INFO    ] Found initial X and Y shifts of -4.392, -0.3918 based on a single non-zero bin and 3 matches
[WARNING ] ##############################################################################
[WARNING ] #                                                                            #
[WARNING ] # WARNING:                                                                   #
[WARNING ] # Not enough matches (< 5) found for input image: ibxl53030_drz.fits         #
[WARNING ] #                                                                            #
[WARNING ] ##############################################################################
[INFO    ] ##############################################################################
[INFO    ] #                                                                            #
[INFO    ] # WARNING:                                                                   #
[INFO    ] # Not enough matches (< 5) found for input image: ibxl53030_drz.fits         #
[INFO    ] #                                                                            #
[INFO    ] ##############################################################################
[INFO    ] 
[INFO    ] ====================
[INFO    ] Performing fit for: ibxl55030_drz.fits
[INFO    ] 
[INFO    ] Matching sources from 'ibxl55030_drz.fits' with sources from reference image 'ibxl54030_drz.fits'
[INFO    ] Computing initial guess for X and Y shifts...
[INFO    ] Found initial X and Y shifts of -0.3918, -0.3918 based on a single non-zero bin and 4 matches
[WARNING ] ##############################################################################
[WARNING ] #                                                                            #
[WARNING ] # WARNING:                                                                   #
[WARNING ] # Not enough matches (< 5) found for input image: ibxl55030_drz.fits         #
[WARNING ] #                                                                            #
[WARNING ] ##############################################################################
[INFO    ] ##############################################################################
[INFO    ] #                                                                            #
[INFO    ] # WARNING:                                                                   #
[INFO    ] # Not enough matches (< 5) found for input image: ibxl55030_drz.fits         #
[INFO    ] #                                                                            #
[INFO    ] ##############################################################################
[INFO    ] 
[INFO    ] ====================
[INFO    ] Performing fit for: ibxl57030_drz.fits
[INFO    ] 
[INFO    ] Matching sources from 'ibxl57030_drz.fits' with sources from reference image 'ibxl54030_drz.fits'
[INFO    ] Computing initial guess for X and Y shifts...
[INFO    ] Trailer file written to:  tweakreg.log
[ERROR   ] An unhandled exception ocurred:
Traceback (most recent call last):
  File "/Users/etollerud/miniconda3/envs/nb-build/lib/python3.7/site-packages/drizzlepac/util.py", line 225, in wrapper
    result = func(*args, **kwargs)
  File "/Users/etollerud/miniconda3/envs/nb-build/lib/python3.7/site-packages/drizzlepac/tweakreg.py", line 551, in run
    image.match(refimage, quiet_identity=False, **objmatch_par)
  File "/Users/etollerud/miniconda3/envs/nb-build/lib/python3.7/site-packages/drizzlepac/imgclasses.py", line 521, in match
    searchrad=radius
  File "/Users/etollerud/miniconda3/envs/nb-build/lib/python3.7/site-packages/drizzlepac/imgclasses.py", line 1670, in _estimate_2dhist_shift
    .format(xp, yp, sig, flux))
UnboundLocalError: local variable 'sig' referenced before assignment
